import { MailSlurp } from 'mailslurp-client';

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

function register(Cypress) {
  Cypress.Commands.add('mailslurp', function (config) {
    var _config$apiKey;
    // read the API Key from environment variable (see the API Key section of README)
    var apiKey = (_config$apiKey = config == null ? void 0 : config.apiKey) != null ? _config$apiKey : Cypress.env('MAILSLURP_API_KEY');
    if (!apiKey) {
      throw new Error('Error no MailSlurp API Key. Please either pass the mailslurp command a valid Config object or set the `CYPRESS_MAILSLURP_API_KEY` ' + 'environment variable to the value of your MailSlurp API Key to use the MailSlurp Cypress plugin. ' + 'Create a free account at https://app.mailslurp.com/sign-up/. See https://docs.cypress.io/guides/guides/environment-variables#Option-3-CYPRESS_ for more information.');
    }
    var mailslurp = new MailSlurp(_extends({}, config, {
      apiKey: apiKey,
      basePath: 'https://cypress.api.mailslurp.com'
    }));
    return Promise.resolve(mailslurp);
  });
}
register(Cypress);
//# sourceMappingURL=cypress-mailslurp.esm.js.map
